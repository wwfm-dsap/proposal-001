<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Home Screen</title>
<style>
  .recycle-bin {
    width: 100px;
    height: 100px;
    border: 2px dashed black;
    text-align: center;
    line-height: 100px;
    margin-top: 20px;
  }
  
  .app {
    display: inline-block;
    width: 100px;
    height: 100px;
    margin: 10px;
    text-align: center;
    line-height: 100px;
    cursor: pointer;
  }
</style>
</head>
<body>
<h1>Client-Side Cache/ Serverless (Android-Style) App Install/ Uninstall</h1>
<a href="app-store.html">App Store</a></br>
<div id="apps-container">
  <!-- Apps will be dynamically added here -->
</div>
<div class="recycle-bin" id="trash">Recycle Bin</div>
</br></br>
<b>1. Go to App-Store</b></br>
<b>2. Install an App</b></br>
<b>3. Return to this Home Screen</b></br>
<b>4. Drag & Drop to Bin to Remove App Icon from Home Screen</b></br>
<b>5. Return to App Store to see App is re-installable</b>
<script>
  // Function to update the home screen based on installed apps
  function updateHomeScreen() {
    const appsContainer = document.getElementById('apps-container');
    appsContainer.innerHTML = ''; // Clear existing apps
    const appIds = ['app1', 'app2', 'app3'];
    appIds.forEach(appId => {
      if (localStorage.getItem(appId) === 'installed') {
        const appElement = document.createElement('div');
        appElement.classList.add('app');
        appElement.setAttribute('draggable', true);
        appElement.id = appId;
        appElement.style.backgroundColor = getAppColor(appId);
        appElement.innerHTML = '<a href="#" onclick="return false;">App ' + appId.slice(-1) + '</a>';
        appElement.addEventListener('dragstart', handleDragStart);
        appsContainer.appendChild(appElement);
      }
    });
  }

  // Function to get app color
  function getAppColor(appId) {
    switch (appId) {
      case 'app1':
        return 'green';
      case 'app2':
        return 'red';
      case 'app3':
        return 'blue';
      default:
        return '';
    }
  }

  // Initialize home screen
  updateHomeScreen();

  // Function to handle drag start
  function handleDragStart(event) {
    event.dataTransfer.setData('text/plain', event.target.id);
  }

  // Function to handle drag over
  function handleDragOver(event) {
    event.preventDefault();
  }

  // Function to handle drop
  function handleDrop(event) {
    event.preventDefault();
    const appId = event.dataTransfer.getData('text/plain');
    const appElement = document.getElementById(appId);
    if (appElement) {
      appElement.remove();
      localStorage.removeItem(appId);
      updateAppStore(); // Update app store after removal
    }
  }

  // Initialize drag-and-drop listener for the recycle bin
  const recycleBin = document.getElementById('trash');
  recycleBin.addEventListener('dragover', handleDragOver);
  recycleBin.addEventListener('drop', handleDrop);

  // Function to update the app store based on installed apps
  function updateAppStore() {
    const appIds = ['app1', 'app2', 'app3'];
    appIds.forEach(appId => {
      const installState = localStorage.getItem(appId);
      const installButton = document.getElementById(appId);
      if (installButton) {
        if (installState === 'installed') {
          installButton.innerText = 'Install App ' + appId.slice(-1);
        } else {
          installButton.innerText = 'Uninstall App ' + appId.slice(-1);
        }
      }
    });
  }

  // Listen for changes in the localStorage and update home screen
  window.addEventListener('storage', updateHomeScreen);

</script>
</body>
</html>
